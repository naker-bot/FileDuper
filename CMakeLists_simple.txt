cmake_minimum_required(VERSION 3.16)
project(SimpleDuplicateTest)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

find_package(Qt6 REQUIRED COMPONENTS Core Network Widgets Gui)
find_package(OpenCL QUIET)
find_package(PkgConfig REQUIRED)
pkg_check_modules(CURL REQUIRED libcurl)

qt6_standard_project_setup()

set(SOURCES
    simple_duplicate_test.cpp
    src/scanner.cpp
    src/presetmanager.cpp
    src/hashengine.cpp
    src/activityindicator.cpp
)

set(HEADERS
    include/scanner.h
    include/presetmanager.h
    include/hashengine.h
    include/activityindicator.h
)

qt6_add_executable(simple_duplicate_test ${SOURCES} ${HEADERS})

target_include_directories(simple_duplicate_test PRIVATE include)
target_link_libraries(simple_duplicate_test Qt6::Core Qt6::Network Qt6::Widgets Qt6::Gui)

if(OpenCL_FOUND)
    target_link_libraries(simple_duplicate_test ${OpenCL_LIBRARIES})
    target_include_directories(simple_duplicate_test PRIVATE ${OpenCL_INCLUDE_DIRS})
    target_compile_definitions(simple_duplicate_test PRIVATE OPENCL_ENABLED)
endif()

target_link_libraries(simple_duplicate_test ${CURL_LIBRARIES})
target_include_directories(simple_duplicate_test PRIVATE ${CURL_INCLUDE_DIRS})
target_compile_options(simple_duplicate_test PRIVATE ${CURL_CFLAGS_OTHER})
